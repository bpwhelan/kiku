import { onMount } from "solid-js";
import { useConfig } from "../shared/Context";

export default function CacheJoyoKanji() {
  const [config] = useConfig();
  const joyoKanji = `äºœå“€æŒ¨æ„›æ›–æ‚ªæ¡åœ§æ‰±å®›åµå®‰æ¡ˆæš—ä»¥è¡£ä½å›²åŒ»ä¾å§”å¨ç‚ºç•èƒƒå°‰ç•°ç§»èŽå‰æ¤…å½™æ„é•ç¶­æ…°éºç·¯åŸŸè‚²ä¸€å£±é€¸èŒ¨èŠ‹å¼•å°å› å’½å§»å“¡é™¢æ·«é™°é£²éš éŸ»å³å®‡ç¾½é›¨å”„é¬±ç•æµ¦é‹é›²æ°¸æ³³è‹±æ˜ æ „å–¶è© å½±é‹­è¡›æ˜“ç–«ç›Šæ¶²é§…æ‚¦è¶Šè¬é–²å††å»¶æ²¿ç‚Žæ€¨å®´åª›æ´åœ’ç…™çŒ¿é é‰›å¡©æ¼”ç¸è‰¶æ±šçŽ‹å‡¹å¤®å¿œå¾€æŠ¼æ—ºæ¬§æ®´æ¡œç¿å¥¥æ¨ªå²¡å±‹å„„æ†¶è‡†è™žä¹™ä¿ºå¸éŸ³æ©æ¸©ç©ä¸‹åŒ–ç«åŠ å¯ä»®ä½•èŠ±ä½³ä¾¡æžœæ²³è‹›ç§‘æž¶å¤å®¶è·è¯è“è²¨æ¸¦éŽå«æš‡ç¦é´å¯¡æ­Œç®‡ç¨¼èª²èšŠç‰™ç“¦æˆ‘ç”»èŠ½è³€é›…é¤“ä»‹å›žç°ä¼šå¿«æˆ’æ”¹æ€ªæ‹æ‚”æµ·ç•Œçš†æ¢°çµµé–‹éšŽå¡Šæ¥·è§£æ½°å£Šæ‡è«§è²å¤–åŠ¾å®³å´–æ¶¯è¡—æ…¨è“‹è©²æ¦‚éª¸åž£æŸ¿å„è§’æ‹¡é©æ ¼æ ¸æ®»éƒ­è¦šè¼ƒéš”é–£ç¢ºç²åš‡ç©«å­¦å²³æ¥½é¡é¡ŽæŽ›æ½Ÿæ‹¬æ´»å–æ¸‡å‰²è‘›æ»‘è¤è½„ä¸”æ ªé‡œéŽŒåˆˆå¹²åˆŠç”˜æ±—ç¼¶å®Œè‚å®˜å† å·»çœ‹é™¥ä¹¾å‹˜æ‚£è²«å¯’å–šå ªæ›æ•¢æ£ºæ¬¾é–“é–‘å‹§å¯›å¹¹æ„Ÿæ¼¢æ…£ç®¡é–¢æ­“ç›£ç·©æ†¾é‚„é¤¨ç’°ç°¡è¦³éŸ“è‰¦é‘‘ä¸¸å«å²¸å²©çŽ©çœ¼é ‘é¡”é¡˜ä¼ä¼Žå±æœºæ°—å²å¸Œå¿Œæ±½å¥‡ç¥ˆå­£ç´€è»Œæ—¢è¨˜èµ·é£¢é¬¼å¸°åŸºå¯„è¦äº€å–œå¹¾æ®æœŸæ£‹è²´æ£„æ¯€æ——å™¨ç•¿è¼æ©Ÿé¨ŽæŠ€å®œå½æ¬ºç¾©ç–‘å„€æˆ¯æ“¬çŠ è­°èŠå‰å–«è©°å´å®¢è„šé€†è™ä¹ä¹…åŠå¼“ä¸˜æ—§ä¼‘å¸æœ½è‡¼æ±‚ç©¶æ³£æ€¥ç´šç³¾å®®æ•‘çƒçµ¦å—…çª®ç‰›åŽ»å·¨å±…æ‹’æ‹ æŒ™è™šè¨±è·é­šå¾¡æ¼å‡¶å…±å«ç‹‚äº¬äº«ä¾›å”æ³å³¡æŒŸç‹­ææ­èƒ¸è„…å¼·æ•™éƒ·å¢ƒæ©‹çŸ¯é¡ç«¶éŸ¿é©šä»°æšæ¥­å‡æ›²å±€æ¥µçŽ‰å·¾æ–¤å‡è¿‘é‡‘èŒå‹¤ç´ç­‹åƒ…ç¦ç·ŠéŒ¦è¬¹è¥ŸåŸéŠ€åŒºå¥è‹¦é§†å…·æƒ§æ„šç©ºå¶é‡éš…ä¸²å±ˆæŽ˜çªŸç†Šç¹°å›è¨“å‹²è–«è»éƒ¡ç¾¤å…„åˆ‘å½¢ç³»å¾„èŒŽä¿‚åž‹å¥‘è¨ˆæµå•“æŽ²æ¸“çµŒè›æ•¬æ™¯è»½å‚¾æºç¶™è©£æ…¶æ†¬ç¨½æ†©è­¦é¶èŠ¸è¿Žé¯¨éš™åŠ‡æ’ƒæ¿€æ¡æ¬ ç©´è¡€æ±ºçµå‚‘æ½”æœˆçŠ¬ä»¶è¦‹åˆ¸è‚©å»ºç ”çœŒå€¹å…¼å‰£æ‹³è»’å¥é™ºåœå …æ¤œå«ŒçŒ®çµ¹é£æ¨©æ†²è³¢è¬™éµç¹­é¡•é¨“æ‡¸å…ƒå¹»çŽ„è¨€å¼¦é™åŽŸç¾èˆ·æ¸›æºåŽ³å·±æˆ¸å¤å‘¼å›ºè‚¡è™Žå­¤å¼§æ•…æž¯å€‹åº«æ¹–é›‡èª‡é¼“éŒ®é¡§äº”äº’åˆå‘‰å¾Œå¨¯æ‚Ÿç¢èªžèª¤è­·å£å·¥å…¬å‹¾å­”åŠŸå·§åºƒç”²äº¤å…‰å‘åŽå¥½æ±Ÿè€ƒè¡Œå‘å­æŠ—æ”»æ›´åŠ¹å¹¸æ‹˜è‚¯ä¾¯åŽšæ’æ´ªçš‡ç´…è’éƒŠé¦™å€™æ ¡è€•èˆªè²¢é™é«˜åº·æŽ§æ¢—é»„å–‰æ…Œæ¸¯ç¡¬çµžé …æºé‰±æ§‹ç¶±é…µç¨¿èˆˆè¡¡é‹¼è¬›è³¼ä¹žå·åˆæ‹·å‰›å‚²è±ªå…‹å‘Šè°·åˆ»å›½é»’ç©€é…·ç„éª¨é§’è¾¼é ƒä»Šå›°æ˜†æ¨æ ¹å©šæ··ç—•ç´ºé­‚å¢¾æ‡‡å·¦ä½æ²™æŸ»ç ‚å”†å·®è©éŽ–åº§æŒ«æ‰å†ç½å¦»é‡‡ç •å®°æ ½å½©æŽ¡æ¸ˆç¥­æ–Žç´°èœæœ€è£å‚µå‚¬å¡žæ­³è¼‰éš›åŸ¼åœ¨æå‰¤è²¡ç½ªå´Žä½œå‰Šæ˜¨æŸµç´¢ç­–é…¢æ¾éŒ¯å’²å†Šæœ­åˆ·åˆ¹æ‹¶æ®ºå¯Ÿæ’®æ“¦é›‘çš¿ä¸‰å±±å‚æ¡Ÿèš•æƒ¨ç”£å‚˜æ•£ç®—é…¸è³›æ®‹æ–¬æš«å£«å­æ”¯æ­¢æ°ä»•å²å¸å››å¸‚çŸ¢æ—¨æ­»ç³¸è‡³ä¼ºå¿—ç§ä½¿åˆºå§‹å§‰æžç¥‰è‚¢å§¿æ€æŒ‡æ–½å¸«æ£ç´™è„‚è¦–ç´«è©žæ­¯å—£è©¦è©©è³‡é£¼èªŒé›Œæ‘¯è³œè«®ç¤ºå­—å¯ºæ¬¡è€³è‡ªä¼¼å…äº‹ä¾æ²»æŒæ™‚æ»‹æ…ˆè¾žç£é¤Œç’½é¹¿å¼è­˜è»¸ä¸ƒå±å¤±å®¤ç–¾åŸ·æ¹¿å«‰æ¼†è³ªå®ŸèŠå†™ç¤¾è»ŠèˆŽè€…å°„æ¨èµ¦æ–œç…®é®è¬é‚ªè›‡å°ºå€Ÿé…Œé‡ˆçˆµè‹¥å¼±å¯‚æ‰‹ä¸»å®ˆæœ±å–ç‹©é¦–æ®Šç é…’è…«ç¨®è¶£å¯¿å—å‘ªæŽˆéœ€å„’æ¨¹åŽå›šå·žèˆŸç§€å‘¨å®—æ‹¾ç§‹è‡­ä¿®è¢–çµ‚ç¾žç¿’é€±å°±è¡†é›†æ„é…¬é†œè¹´è¥²åæ±å……ä½æŸ”é‡å¾“æ¸‹éŠƒç£ç¸¦å”ç¥å®¿æ·‘ç²›ç¸®å¡¾ç†Ÿå‡ºè¿°è¡“ä¿Šæ˜¥çž¬æ—¬å·¡ç›¾å‡†æ®‰ç´”å¾ªé †æº–æ½¤éµå‡¦åˆæ‰€æ›¸åº¶æš‘ç½²ç·’è«¸å¥³å¦‚åŠ©åºå™å¾é™¤å°å‡å°‘å¬åŒ åºŠæŠ„è‚–å°šæ‹›æ‰¿æ˜‡æ¾æ²¼æ˜­å®µå°†æ¶ˆç—‡ç¥¥ç§°ç¬‘å”±å•†æ¸‰ç« ç´¹è¨Ÿå‹æŽŒæ™¶ç„¼ç„¦ç¡ç²§è©”è¨¼è±¡å‚·å¥¨ç…§è©³å½°éšœæ†§è¡è³žå„Ÿç¤é˜ä¸Šä¸ˆå†—æ¡çŠ¶ä¹—åŸŽæµ„å‰°å¸¸æƒ…å ´ç•³è’¸ç¸„å£Œå¬¢éŒ è­²é†¸è‰²æ‹­é£Ÿæ¤æ®–é£¾è§¦å˜±ç¹”è·è¾±å°»å¿ƒç”³ä¼¸è‡£èŠ¯èº«è¾›ä¾µä¿¡æ´¥ç¥žå”‡å¨ æŒ¯æµ¸çœŸé‡æ·±ç´³é€²æ£®è¨ºå¯æ…Žæ–°å¯©éœ‡è–ªè¦ªäººåˆƒä»å°½è¿…ç”šé™£å°‹è…Žé ˆå›³æ°´å¹åž‚ç‚Šå¸¥ç²‹è¡°æŽ¨é…”é‚ç¡ç©‚éšé«„æž¢å´‡æ•°æ®æ‰è£¾å¯¸ç€¬æ˜¯äº•ä¸–æ­£ç”Ÿæˆè¥¿å£°åˆ¶å§“å¾æ€§é’æ–‰æ”¿æ˜Ÿç‰²çœå‡„é€æ¸…ç››å©¿æ™´å‹¢è–èª ç²¾è£½èª“é™è«‹æ•´é†’ç¨Žå¤•æ–¥çŸ³èµ¤æ˜”æžå¸­è„Šéš»æƒœæˆšè²¬è·¡ç©ç¸¾ç±åˆ‡æŠ˜æ‹™çªƒæŽ¥è¨­é›ªæ‘‚ç¯€èª¬èˆŒçµ¶åƒå·ä»™å å…ˆå®£å°‚æ³‰æµ…æ´—æŸ“æ‰‡æ “æ—‹èˆ¹æˆ¦ç…Žç¾¨è…ºè©®è·µç®‹éŠ­æ½œç·šé·é¸è–¦ç¹Šé®®å…¨å‰å–„ç„¶ç¦…æ¼¸è†³ç¹•ç‹™é˜»ç¥–ç§Ÿç´ æŽªç²—çµ„ç–Žè¨´å¡‘é¡ç¤ŽåŒå£®æ—©äº‰èµ°å¥ç›¸è˜è‰é€å€‰æœæŒ¿æ¡‘å·£æŽƒæ›¹æ›½çˆ½çª“å‰µå–ªç—©è‘¬è£…åƒ§æƒ³å±¤ç·é­æ§½è¸ªæ“ç‡¥éœœé¨’è—»é€ åƒå¢—æ†Žè”µè´ˆè‡“å³æŸè¶³ä¿ƒå‰‡æ¯æ‰é€Ÿå´æ¸¬ä¿—æ—å±žè³Šç¶šå’çŽ‡å­˜æ‘å­«å°Šæéœä»–å¤šæ±°æ‰“å¦¥å”¾å •æƒ°é§„å¤ªå¯¾ä½“è€å¾…æ€ èƒŽé€€å¸¯æ³°å †è¢‹é€®æ›¿è²¸éšŠæ»žæ…‹æˆ´å¤§ä»£å°ç¬¬é¡Œæ»å®…æŠžæ²¢å“æ‹“è¨—æ¿¯è«¾æ¿ä½†é”è„±å¥ªæ£šèª°ä¸¹æ—¦æ‹…å˜ç‚­èƒ†æŽ¢æ·¡çŸ­å˜†ç«¯ç¶»èª•é›å›£ç”·æ®µæ–­å¼¾æš–è«‡å£‡åœ°æ± çŸ¥å€¤æ¥è‡´é…ç—´ç¨šç½®ç·»ç«¹ç•œé€è“„ç¯‰ç§©çª’èŒ¶ç€å«¡ä¸­ä»²è™«æ²–å®™å¿ æŠ½æ³¨æ˜¼æŸ±è¡·é…Žé‹³é§è‘—è²¯ä¸å¼”åºå…†ç”ºé•·æŒ‘å¸³å¼µå½«çœºé‡£é ‚é³¥æœè²¼è¶…è…¸è·³å¾´å˜²æ½®æ¾„èª¿è´æ‡²ç›´å‹…æ—æ²ˆçæœ•é™³è³ƒéŽ®è¿½æ¤Žå¢œé€šç—›å¡šæ¼¬åªçˆªé¶´ä½Žå‘ˆå»·å¼Ÿå®šåº•æŠµé‚¸äº­è²žå¸è¨‚åº­é€“åœåµå ¤æç¨‹è‰‡ç· è«¦æ³¥çš„ç¬›æ‘˜æ»´é©æ•µæººè¿­å“²é‰„å¾¹æ’¤å¤©å…¸åº—ç‚¹å±•æ·»è»¢å¡¡ç”°ä¼æ®¿é›»æ–—åå¦¬å¾’é€”éƒ½æ¸¡å¡—è³­åœŸå¥´åŠªåº¦æ€’åˆ€å†¬ç¯å½“æŠ•è±†æ±åˆ°é€ƒå€’å‡å”å³¶æ¡ƒè¨Žé€å…šæ‚¼ç›—é™¶å¡”æ­æ£Ÿæ¹¯ç—˜ç™»ç­”ç­‰ç­’çµ±ç¨²è¸ç³–é ­è¬„è—¤é—˜é¨°åŒæ´žèƒ´å‹•å ‚ç«¥é“åƒéŠ…å°Žçž³å³ åŒ¿ç‰¹å¾—ç£å¾³ç¯¤æ¯’ç‹¬èª­æ ƒå‡¸çªå±Šå±¯è±šé “è²ªéˆæ›‡ä¸¼é‚£å¥ˆå†…æ¢¨è¬Žé‹å—è»Ÿé›£äºŒå°¼å¼åŒ‚è‚‰è™¹æ—¥å…¥ä¹³å°¿ä»»å¦Šå¿èªå¯§ç†±å¹´å¿µæ»ç²˜ç‡ƒæ‚©ç´èƒ½è„³è¾²æ¿ƒæŠŠæ³¢æ´¾ç ´è¦‡é¦¬å©†ç½µæ‹æ¯èƒŒè‚ºä¿³é…æŽ’æ•—å»ƒè¼©å£²å€æ¢…åŸ¹é™ªåª’è²·è³ ç™½ä¼¯æ‹æ³Šè¿«å‰èˆ¶åšè–„éº¦æ¼ ç¸›çˆ†ç®±ç®¸ç•‘è‚Œå…«é‰¢ç™ºé«ªä¼æŠœç½°é–¥ååŠæ°¾çŠ¯å¸†æ±Žä¼´åˆ¤å‚é˜ªæ¿ç‰ˆç­ç•”èˆ¬è²©æ–‘é£¯æ¬ç…©é ’ç¯„ç¹è—©æ™©ç•ªè›®ç›¤æ¯”çš®å¦ƒå¦æ‰¹å½¼æŠ«è‚¥éžå‘é£›ç–²ç§˜è¢«æ‚²æ‰‰è²»ç¢‘ç½·é¿å°¾çœ‰ç¾Žå‚™å¾®é¼»è†è‚˜åŒ¹å¿…æ³Œç­†å§«ç™¾æ°·è¡¨ä¿µç¥¨è©•æ¼‚æ¨™è‹—ç§’ç—…æçŒ«å“æµœè²§è³“é »æ•ç“¶ä¸å¤«çˆ¶ä»˜å¸ƒæ‰¶åºœæ€–é˜œé™„è¨ƒè² èµ´æµ®å©¦ç¬¦å¯Œæ™®è…æ•·è†šè³¦è­œä¾®æ­¦éƒ¨èˆžå°é¢¨ä¼æœå‰¯å¹…å¾©ç¦è…¹è¤‡è¦†æ‰•æ²¸ä»ç‰©ç²‰ç´›é›°å™´å¢³æ†¤å¥®åˆ†æ–‡èžä¸™å¹³å…µä½µä¸¦æŸ„é™›é–‰å¡€å¹£å¼Šè”½é¤…ç±³å£ç’§ç™–åˆ¥è”‘ç‰‡è¾ºè¿”å¤‰åéç·¨å¼ä¾¿å‹‰æ­©ä¿å“ºæ•è£œèˆ—æ¯å‹Ÿå¢“æ…•æš®ç°¿æ–¹åŒ…èŠ³é‚¦å¥‰å®æŠ±æ”¾æ³•æ³¡èƒžä¿¸å€£å³°ç ²å´©è¨ªå ±èœ‚è±Šé£½è¤’ç¸«äº¡ä¹å¿™åŠå¦¨å¿˜é˜²æˆ¿è‚ªæŸå†’å‰–ç´¡æœ›å‚å¸½æ£’è²¿è²Œæš´è†¨è¬€é °åŒ—æœ¨æœ´ç‰§ç¦åƒ•å¢¨æ’²æ²¡å‹ƒå €æœ¬å¥”ç¿»å‡¡ç›†éº»æ‘©ç£¨é­”æ¯Žå¦¹æžšæ˜§åŸ‹å¹•è†œæž•åˆæœ«æŠ¹ä¸‡æº€æ…¢æ¼«æœªå‘³é­…å²¬å¯†èœœè„ˆå¦™æ°‘çœ çŸ›å‹™ç„¡å¤¢éœ§å¨˜åå‘½æ˜Žè¿·å†¥ç›ŸéŠ˜é³´æ»…å…é¢ç¶¿éººèŒ‚æ¨¡æ¯›å¦„ç›²è€—çŒ›ç¶²ç›®é»™é–€ç´‹å•å†¶å¤œé‡Žå¼¥åŽ„å½¹ç´„è¨³è–¬èºé—‡ç”±æ²¹å–©æ„‰è«­è¼¸ç™’å”¯å‹æœ‰å‹‡å¹½æ‚ éƒµæ¹§çŒ¶è£•éŠé›„èª˜æ†‚èžå„ªä¸Žäºˆä½™èª‰é å¹¼ç”¨ç¾Šå¦–æ´‹è¦å®¹åº¸æšæºè‘‰é™½æº¶è…°æ§˜ç˜è¸Šçª¯é¤Šæ“è¬¡æ›œæŠ‘æ²ƒæµ´æ¬²ç¿Œç¿¼æ‹‰è£¸ç¾…æ¥é›·é ¼çµ¡è½é…ªè¾£ä¹±åµè¦§æ¿«è—æ¬„ååˆ©é‡Œç†ç—¢è£å±¥ç’ƒé›¢é™¸ç«‹å¾‹æ…„ç•¥æŸ³æµç•™ç«œç²’éš†ç¡«ä¾¶æ—…è™œæ…®äº†ä¸¡è‰¯æ–™æ¶¼çŒŸé™µé‡åƒšé ˜å¯®ç™‚çž­ç³§åŠ›ç·‘æž—åŽ˜å€«è¼ªéš£è‡¨ç‘ æ¶™ç´¯å¡é¡žä»¤ç¤¼å†·åŠ±æˆ»ä¾‹éˆ´é›¶éœŠéš·é½¢éº—æš¦æ­´åˆ—åŠ£çƒˆè£‚æ‹é€£å»‰ç·´éŒ¬å‘‚ç‚‰è³‚è·¯éœ²è€åŠ´å¼„éƒŽæœ—æµªå»Šæ¥¼æ¼ç± å…­éŒ²éº“è«–å’Œè©±è³„è„‡æƒ‘æž æ¹¾è…•`;

  function forceCacheJoyoKanji() {
    //NOTE: Anki Droid doesn't preseve document.documentElement and sessionStorage between cards so this skip guard doesn't work
    if (
      document.getElementById("joyo-kanji-container") ||
      sessionStorage.getItem("joyoKanjiCached")
    ) {
      return console.log("ðŸ”¥ Joyo Kanji cache already exists");
    }
    console.log("ðŸ”¥ Forcing Joyo Kanji cache");

    const joyoKanjiContainer = document.createElement("div");
    joyoKanjiContainer.id = "joyo-kanji-container";
    joyoKanjiContainer.innerHTML = joyoKanji;
    joyoKanjiContainer.style.width = "0";
    joyoKanjiContainer.style.height = "0";
    joyoKanjiContainer.style.overflow = "hidden";
    joyoKanjiContainer.style.position = "absolute";
    joyoKanjiContainer.style.fontFamily = config.onlineFont;
    document.body.appendChild(joyoKanjiContainer);
    sessionStorage.setItem("joyoKanjiCached", "true");
  }

  onMount(() => {
    if (config.systemFont) return;
    forceCacheJoyoKanji();
  });

  return null;
}
